general {
    lock_cmd = pidof hyprlock || hyprlock       # avoid starting multiple hyprlock instances.
    before_sleep_cmd = loginctl lock-session    # lock before suspend.
    after_sleep_cmd = brightnessctl set 50%  # restore brightness after wake
}

listener {
    timeout = 300                      # 5min
    on-timeout = loginctl lock-session # lock screen when timeout has passed
}

# DPMS does not work on Apple Silicon (DCP firmware ignores it).
# Backlight dimming is used instead. The external monitor's own
# power saving will blank it after detecting no activity.
listener {
    timeout = 330                                 # 5.5min
    on-timeout = brightnessctl set 0              # turn off internal backlight
    on-resume = brightnessctl set 50%             # restore brightness on activity
}

# Suspend disabled due to MacBook crashes - rely on lid close for suspend
# listener {
#     timeout = 1800                                     # 30min
#     on-timeout = systemctl suspend                    # suspend system
# }
